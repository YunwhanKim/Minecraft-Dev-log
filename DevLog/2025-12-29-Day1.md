# 2025/12/29 (Mon) [Dev Log 02]
## 플러그인 기초 (Hello World)

### __1. 플러그인 설정__<br>
- 마인크래프트 플러그인 설정 : 새 프로젝트를 만들기 시작하면<br>
- Groups 에서 플러그인 선택<br>
- Paper 선택<br>
- 자바와 마인크래프트 버전 1.21.10 선택 <br>

### __2. 프로젝트 구조__<br>
```scr/main/java``` : 실제 자바 소스 코드가 들어가 있는 위치<br>
```scr/main/resources``` : 소스 코드가 아닌 파일들이 들어감 <br>
```scr/main/resources/plugin.yml``` : 서버가 플러그인을 인식하기 위한 신분증 같은 파일. (플러그인 이름, 버전, 메인클래스 위치, 명령어 등이 정의됨)<br>

### __3. 기본 코드 살펴보기__<br>
```
package com.study.day01;

import org.bukkit.plugin.java.JavaPlugin;

public final class Day01 extends JavaPlugin {
    @Override
    public void onEnable() {
    }
    @Override
    public void onDisable() {
    }
}
```
- __package com.study.day01__ : com.study.day01 이라는 하나의 패키지에 속해있다는 뜻
- __class Day01 extends JavaPlugin__ : JavaPlugin 이라는 클래스를 상속받고 있음
- __onEnable()__ : 서버가 시작되거나 플러그인이 로드 될 때 실행되는 메소드 (Constructor와 비슷함)
- __onDisable()__ : 서버가 시작되거나 플러그인이 언로드 될 때 실행되는 메소드
- 보통 서버가 시작되어 플러그인이 적용될 때 서버 콘솔에 메시지를 표현할 때 주로 사용하는 메소드이다

### __4. 서버에 플러그인이 잘 적용되거나 언로드 되었는지 확인하는 메소드 getLogger().info()__<br>
```getLogger().info()```<br>
__getLogger()__ : 서버 콘솔에 메시지를 툴력해주는 메소드. 이걸로 서버에 플러그인이 잘 활성화 되었는지 비활성화 되었는지 알 수 있음 <br>

```diff
    @Override
    public void onEnable() {
+      getLogger().info("플러그인이 성공적으로 활성화 되었습니다.");
    }
    @Override
    public void onDisable() {
+      getLogger().info("플러그인이 성공적으로 비활성화 되었습니다.");
    }
```

#### System.in.println() 대신에 getLogger().info()를 사용하는 이유 <br>
수십 개의 플러그인이 동시에 돌아가는 서버에서 그냥 println을 사용하면 어느 플러그인이 보낸 메시지인지 알수도 없고 <br>
만약 오류가 발생했다면 언제 오류가 발생했는지 시간 표시조차 없게 된다.<br>

```
[17:30:21 INFO]: [Day01] 플러그인이 활성화 되었습니다
```
[로그 발생 시간 (메시지 중요도)] [플러그인출처] 메시지출력 가능

### __5. 빌드__<br>
작성한 코드를 이제 서버에 넣기 위해서는 .jar 파일 (Java Archive) 파일로 만들어야 한다. <br>
- 오른쪽 사이드 바에 있는 Gradle 탭 확인
- Tasks -> builds 찾기
- builds 더블 클릭
- builds가 성공하면 프로젝트 폴더 내 ```build/libs``` 경로에서 __Day01-1.0-SNAPSHOT.jar__ 파일이 생성된다.

### __6. 확인을 위해 내 컴퓨터에서 사설 서버 열어보기__ <br>
- 원하는 위치에 TestServer라는 새폴더 만들기
- paperMC 공식 홈페이지에서 개발중인 마인크래프트 버전에 맞는 빌드(여기서는 1.21.10)를 다운로드 하기
- 다운로드한 파일을 TestServer 폴더 안으로 옮기기
- 파일 이름을 편의상 server.jar로 바꿉니다
- 실행 스크립트 만들기 (메모장에 아래의 내용을 복사 붙혀넣기)
```
@echo off
java -Xms2G -Xmx2G -jar server.jar nogui 
pause
```
__java -jar server.jar__  : 자바 가상 머신에게 server.jar 파일을 실행하라는 명령 <br><br>
__-Xms2G -Xmx2G__ : 힙 메모리 설정 (서버에 최소 2GB, 최대 2GB 램을 할당한다는 뜻) <br><br>
__nogui__ : 불필요한 그래픽 창을 띄우지 않고 콘솔 만 사용하여 리소스를 아낀다는 뜻 <br><br>
__pause__ : 서버가 꺼졌을 때 창이 바로 닫히지 않고, 에러 로그를 볼 수 있게 멈춰주는 명령어 <br><br>

- 이제 위의 내용을 적은 메모장을 ``start.bat``으로 확장자도 바꿔서 저장
- 이제 ``start.bat``을 클릭하고 실행하면 콘솔에서 "You need to agree to the EULA..." 라는 문구가 뜸
- 그러면 TestServer 안에 ``eula.txt`` 라는 파일이 생성됨
- ``eula.txt`` 파일을 열어 __eula=false__ 부분을 __eula=true__ 로 수정하고 저장 <br>

### __7. 플러그인 적용하기__ <br>
- 우리가 빌드했던 프로젝트에서  ```build/libs/Day01-1.0-SNAPSHOT.jar``` 라는 파일을 복사
- 복사한 파일을 ```TestServer/plugins``` 폴더 안에 붙혀넣기 <br>

### __8. 확인__ <br>
- ```start.bat```을 다시 클릭해서 실행하면 콘솔창이 열리고 알아서 플러그인을 적용한 서버를 연다
- 콘솔 창 메시지에서 ```플러그인이 성공적으로 활성화 되었습니다``` 라는 메시지를 찾았다면 플러그인 적용 성공
- 이제 그 콘솔을 그대로 켜놓는다
- 마인크래프트 같은 버전 (여기서는 1.21.10) 을 키고 Multiplayer 에서 직접 연결 (Direct Connection) 을 이용해서 ```localhost``` 를 사용해서 연다
- 내가 만든 플러그인과 사설 서버에 연결되게 된다

<2025/12/29 끝>
